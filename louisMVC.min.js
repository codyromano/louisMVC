(function(){"use strict";function t(n){"use strict";if(!this.constructor instanceof t){return new t(n)}var r=this;var i=n.model;this.renderRateLimit=250;this.el=n.el;this.model={set:function(t,s){i[t]=s;if(n.dataBinding!=false){e.rateLimit("SimpleMVCRender",r.render,r.renderRateLimit)}},get:function(e){return i[e]}};var s=function(){var e=true;return function(){if(e){e=false;return false}return true}}();this.events=function(){var t=[];if(typeof n.events!="object"){return t}e.forEachInObj(n.events,function(e,r){var i=e.trim("").split(" ");if(i.length!=2||typeof n[r]!="function"){return}t.push({type:i[0],selector:i[1],callback:n[r]})});return t}();this.template=n.template;this.afterRender=null;if(typeof n.afterRender=="function"){this.afterRender=n.afterRender.bind(this)}this.toggleEventListeners=function(e){var t=this;var n=e?"addEventListener":"removeEventListener";this.events.forEach(function(e){var r=document.querySelector(e.selector);var i=e.callback.bind(t,r);if(e.selector){document.querySelector(e.selector)[n](e.type,i)}})};this.render=function(){var t=this.template;var n;if(!s()){this.el.innerHTML=t}e.forEachNode("[data-model]",function(e){var t=e.dataset.model;if(!t in i){console.warn("Unknown model property '"+t+"'");return}if(e.hasOwnProperty("innerHTML")){e.innerHTML=r.model.get(t)}if(e.hasOwnProperty("value")){e.value=r.model.get(t)}});r.toggleEventListeners(true);e.maybeCall(this.afterRender)}}var e=e||{};e.rateLimit=function(){var e={};return function(t,n,r){var i=e[t];if(!i){i=e[t]={stack:[],polling:false,time:null}}i.stack.push(n);if(!i.polling){(function s(){var e=(new Date).getTime();if(i.stack.length==0){i.polling=false;return false}if(!i.time||e-i.time>=r){i.time=e;i.stack[0]();i.stack.slice(0,1)}else{setTimeout(s,100)}})()}}}();e.forEachInObj=function(e,t){for(var n in e){t(n,e[n])}};e.forEachNode=function(e,t){var n=document.querySelectorAll(e);var r=Array.prototype.slice.call(n);r.forEach(t)};e.maybeCall=function(e){if(typeof e=="function"){e()}};window.LouisMVC=t})()